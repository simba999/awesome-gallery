<!doctype html>
<html>
<head>
    <base href="/">
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta content="initial-scale=1, minimum-scale=1, width=device-width" name="viewport">
    <meta content="noindex" name="alvachien">
    <title>Photo Gallery, Written by Alva Chien</title>
    <link href="app/imgs/favicon.ico" id="favicon" rel="shortcut icon">

    <link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Roboto:300,400,500,700" type="text/css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="libs/css/@angular/material/core/theming/prebuilt/indigo-pink.css" rel="stylesheet">
    <link href="app/css/common.css" rel="stylesheet" />
    <link href="app/css/app.css" rel="stylesheet" />

    <!-- 1. Load libraries -->
    <!-- Polyfill(s) for older browsers -->
    <script>
        (function () {
            var vendors = ['webkit', 'moz'];
            for (var i = 0; i < vendors.length && !window.requestAnimationFrame; ++i) {
                var vp = vendors[i];
                window.requestAnimationFrame = window[vp + 'RequestAnimationFrame'];
                window.cancelAnimationFrame = (window[vp + 'CancelAnimationFrame']
                                           || window[vp + 'CancelRequestAnimationFrame']);
            }
            if (!window.requestAnimationFrame || !window.cancelAnimationFrame) {
                var lastTime = 0;
                window.requestAnimationFrame = function (callback) {
                    var now = new Date().getTime();
                    var nextTime = Math.max(lastTime + 16, now);
                    return setTimeout(function () { callback(lastTime = nextTime); },
                                      nextTime - now);
                };
                window.cancelAnimationFrame = clearTimeout;
            }
        }());
    </script>
    <script src="libs/js/oidc-client/dist/oidc-client.js"></script>
    <script src="libs/fineuploader/fine-uploader.core.js"></script>
    <script src="libs/js/core-js/client/shim.min.js"></script>
    <script src="libs/js/zone.js/dist/zone.js"></script>
    <script src="libs/js/systemjs/dist/system.js"></script>

    <!-- 2. Configure SystemJS -->
    <script src="systemjs.config.js"></script>
    <script>
        System.import('app').catch(function (err) {
            console.error(err);
        });
    </script>
</head>

<body>
    <acgallery-app>HIH is loading...</acgallery-app>

    <script>
        (function () {
            /**
             * Controller for sidebar navigation UI.
             * @param {!Element} el Wrapper element for navigation.
             * @param {!Element} btnEl Button element used to toggle navigation.
             * @constructor
             */

            var Navigation = function (el, btnEl) {
                /** @private {!Element} */
                this.el_ = el;
                /** @private {!Element} */
                this.btnEl_ = btnEl;
                /** @private {!Element} */
                //this.feedbackBtnEl_ = el.querySelector('[data-action=feedback]');

                // Style active links.
                [].slice.call(el.querySelectorAll('.nav-link')).forEach(function (link) {
                    if (link.pathname === window.location.pathname) {
                        link.className += ' active';
                    }
                });

                // Feedback modal.
                //this.feedbackBtnEl_.addEventListener(
                //	'click', this.startFeedback.bind(this));

                // Events are bound to 'mousedown' and 'touchstart', rather than 'click'.
                // Mobile Safari disregards the event spec, and suppresses 'click' events on
                // non-interactive elements. We need clicks anywhere outside the sidebar to
                // *close* the sidebar, so the 'click' event isn't an option.
                // See: http://www.quirksmode.org/blog/archives/2014/02/mouse_event_bub.html
                //
                // Sidebar state changes:
                // - Button: toggle the sidebar.
                // - Document: Close the sidebar, if open.
                // - Sidebar: Stop bubbling, so sidebar does not close during navigation.
                this.btnEl_.addEventListener('mousedown', this.toggle.bind(this));
                this.btnEl_.addEventListener('touchstart', this.toggle.bind(this));
                var stopPropagation = function (e) { e.stopPropagation(); };
                this.el_.addEventListener('mousedown', stopPropagation);
                this.el_.addEventListener('touchstart', stopPropagation);
                document.addEventListener('mousedown', this.close_.bind(this));
                document.addEventListener('touchstart', this.close_.bind(this));
            };

            /**
             * @return {boolean} Whether the sidebar UI is open.
             * @private
             */
            Navigation.prototype.isOpen_ = function () {
                return !!document.body.className.match(/\snav\-open/);
            };

            /**
             * Opens the sidebar UI.
             * @private
             */
            Navigation.prototype.open_ = function () {
                document.body.className += ' nav-open';
            };

            /**
             * Closes the sidebar UI.
             * @private
             */
            Navigation.prototype.close_ = function () {
                if (this.isOpen_()) {
                    var body = document.body;
                    body.className = body.className.replace(/\snav\-open/, '');
                }
            };

            /**
             * Shows/hides the sidebar UI.
             * @param {!Event} e
             */
            Navigation.prototype.toggle = function (e) {
                if (this.isOpen_()) {
                    this.close_();
                } else {
                    this.open_();
                }
                // These are redundant (preventing default is not theoretically necessary),
                // but mobile Safari disagrees.
                this.btnEl_.blur();
                e.preventDefault();
                e.stopPropagation();
            };

            if (!window.SideNavigation)
                window.SideNavigation = Navigation;
        }());
    </script>
</body>
</html>
